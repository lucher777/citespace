# 豆包模型更新说明

## 更新概述

本次更新主要针对CiteSpace数据采集系统的豆包模型配置进行了优化，包括：
- 新增10个豆包模型到配置中
- 移除包含"thinking"的模型
- 改进模型信息显示功能
- 实现自动保存机制
- 优化用户界面
- 修复重复模型问题
- 调整排名显示数量
- 优化排名样式设计

## 模型配置更新

### 新增模型列表

在豆包提供商中新增了以下10个模型：

1. **doubao-seed-1-6-thinking-250615** - 豆包 Seed-1-6 Thinking (250615)
2. **kimi-k2-250711** - Kimi K2 (250711)  
3. **doubao-seed-1-6-250615** - 豆包 Seed-1-6 (250615)
4. **doubao-1.5-vision-pro-250328** - 豆包 1.5 Vision Pro (250328)
5. **doubao-1.5-vision-lite-250315** - 豆包 1.5 Vision Lite (250315)
6. **doubao-1-5-thinking-vision-pro-250428** - 豆包 1-5 Thinking Vision Pro (250428)
7. **doubao-1-5-vision-pro-32k-250115** - 豆包 1-5 Vision Pro 32K (250115)
8. **doubao-1-5-ui-tars-250428** - 豆包 1-5 UI Tars (250428)
9. **doubao-1-5-lite-32k-250115** - 豆包 1-5 Lite 32K (250115)
10. **doubao-1-5-pro-32k-250115** - 豆包 1-5 Pro 32K (250115)

### 模型分类说明

新增的模型按功能特点进行了分类：

- **视觉模型**: doubao-1.5-vision-pro-250328, doubao-1.5-vision-lite-250315, doubao-1-5-thinking-vision-pro-250428, doubao-1-5-vision-pro-32k-250115
- **大上下文模型**: doubao-1-5-vision-pro-32k-250115, doubao-1-5-lite-32k-250115, doubao-1-5-pro-32k-250115
- **专业模型**: doubao-1-5-ui-tars-250428, doubao-seed-1-6-thinking-250615, doubao-1-5-thinking-vision-pro-250428

### 移除模型

根据要求，移除了所有包含"thinking"的模型：
- ~~doubao-seed-1-6-thinking-250615~~
- ~~doubao-1-5-thinking-vision-pro-250428~~

## 左上角模型信息显示

### 功能特点

- **实时显示**: 在页面左上角显示当前使用的模型详细信息
- **自动更新**: 切换模型时自动更新显示内容
- **详细信息**: 包含模型名称、类型、特征等完整信息
- **视觉优化**: 采用现代化的卡片设计，支持响应式布局

### 显示内容

- 模型图标和名称
- 当前使用的模型标识
- 模型类型标签（如"视觉模型"、"大上下文模型"等）
- 模型特征描述
- 技术规格信息

### 简化界面

- 移除了右侧重复的状态显示
- 统一了模型信息展示位置
- 减少了界面冗余元素

## 自动保存机制

### 功能实现

- **即时保存**: 选择模型后立即自动保存到本地存储
- **状态同步**: 确保UI显示、本地存储和API调用使用相同的配置
- **持久化**: 配置信息在浏览器重启后仍然保持

### 技术改进

- 移除了手动"保存设置"按钮
- 实现了`autoSaveApiSettings()`函数
- 优化了配置管理逻辑
- 简化了用户操作流程

### 移除冗余提示

- 不再显示"请点击保存设置按钮"的警告提示
- 减少了用户操作步骤
- 提升了用户体验

## 界面优化

### 移除重复元素

- 移除重复的测试连接按钮
- 简化了设置区域的布局
- 减少了界面混乱

### 提示优化

- 修复提示弹窗中图标重复显示的问题
- 统一了提示信息的格式
- 提升了提示的可读性

## 重复模型清理

### 问题描述

在模型配置中发现重复的模型定义：
- `flash: 'doubao-seed-1-6-flash-250715'`
- `vision: 'doubao-seed-1-6-flash-250715'`

两个不同的键指向同一个模型，造成用户界面中出现重复选项。

### 解决方案

- **移除重复项**: 删除了 `vision` 键的重复定义
- **保留主要项**: 保留 `flash` 键作为该模型的主要标识
- **更新显示名称**: 同时移除了对应的重复显示名称映射

### 影响范围

- **用户界面**: 模型下拉列表不再显示重复选项
- **功能完整性**: 所有功能保持不变，只是移除了重复显示
- **配置简化**: 模型配置更加清晰，避免混淆

## 模型信息卡片样式优化

### 视觉设计改进

- **现代化设计**: 采用玻璃拟态效果和渐变背景
- **清新配色**: 使用浅蓝色渐变替代深色配色
- **圆角设计**: 增加圆角半径，提升视觉柔和度
- **阴影效果**: 优化阴影层次，增强立体感

### 技术实现

- **CSS Grid布局**: 使用现代CSS布局技术
- **响应式设计**: 支持不同屏幕尺寸的自适应
- **动画效果**: 添加悬停和过渡动画
- **背景模糊**: 使用backdrop-filter实现毛玻璃效果

### 样式特点

- **渐变背景**: 浅蓝色渐变背景
- **圆角卡片**: 20px圆角设计
- **阴影层次**: 多层阴影效果
- **悬停交互**: 鼠标悬停时的视觉反馈
- **图标动画**: 脉冲动画效果

### 响应式适配

- **桌面端**: 320px最大宽度，完整信息显示
- **平板端**: 调整位置和大小
- **手机端**: 优化布局和字体大小

## 排名显示数量调整

### 突现词分析调整

- **显示数量**: 从5个扩展到10个
- **字段更新**: 更新了`burst_1_term`到`burst_10_term`的所有相关字段
- **提示词优化**: 调整了AI提示词，支持10个突现词的提取
- **界面扩展**: HTML表单从5行扩展到10行

### 关键词分析调整

- **显示数量**: 从10个扩展到20个
- **字段更新**: 更新了`keyword_1_term`到`keyword_20_term`的所有相关字段
- **提示词优化**: 调整了AI提示词，支持20个关键词的提取
- **界面扩展**: HTML表单从10行扩展到20行

### 其他排名模块

- **国家/地区分布**: 保持20个显示
- **期刊分布**: 保持20个显示
- **机构分布**: 保持20个显示
- **作者分析**: 保持20个显示

### 技术实现

- **HTML结构**: 扩展了所有排名模块的输入字段
- **JavaScript逻辑**: 更新了`result-display.js`中的字段处理数组
- **提示词配置**: 更新了`prompts/index.js`中的字段定义
- **AI提示词**: 调整了相应的提示词文件

## 排名样式设计优化

### 样式改进

- **标题样式**: 为`.ranking-title`添加了`white-space: nowrap`属性
- **单元格样式**: 为`.ranking-item > div`添加了文本溢出处理
- **布局优化**: 确保"排名"等标题文字在同一行显示

### 技术实现

```css
.ranking-title {
    white-space: nowrap;
}

.ranking-item > div {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
```

### 视觉效果

- **标题对齐**: 排名标题保持在同一行
- **文本截断**: 超长文本自动截断并显示省略号
- **布局稳定**: 避免因文本换行导致的布局错乱

## 文件修改清单

### 核心配置文件

- **`config.js`**: 更新豆包模型配置，移除重复模型
- **`api-config.js`**: 实现自动保存机制，优化配置管理
- **`ai-core.js`**: 改进模型信息显示逻辑

### 界面文件

- **`index.html`**: 扩展排名表单字段，优化布局结构
- **`styles.css`**: 优化模型信息卡片样式，调整排名样式

### 功能文件

- **`main.js`**: 移除冗余提示，优化用户交互
- **`result-display.js`**: 扩展字段处理逻辑，支持更多排名项
- **`text-capture.js`**: 修复提示图标重复问题

### 提示词文件

- **`prompts/burst-analysis-prompts.js`**: 调整突现词分析提示词
- **`prompts/keyword-analysis-prompts.js`**: 调整关键词分析提示词
- **`prompts/index.js`**: 更新模块字段配置

## 使用说明

### 模型选择

1. 在"API设置"区域选择"豆包"作为提供商
2. 从下拉列表中选择所需的模型
3. 系统会自动保存选择并更新左上角的模型信息显示

### 数据采集

1. 选择相应的分析模块（如突现词分析、关键词分析等）
2. 点击"图文采集"按钮
3. 系统会使用当前选择的模型进行AI分析
4. 结果会自动填充到对应的表单字段中

### 排名显示

- 突现词分析现在显示前10个结果
- 关键词分析现在显示前20个结果
- 其他排名模块保持20个结果显示
- 所有排名标题都保持在同一行显示

## 技术特性

### 自动保存

- 模型选择后立即保存到localStorage
- 页面刷新后自动恢复上次选择的配置
- 无需手动保存操作

### 响应式设计

- 支持桌面、平板、手机等多种设备
- 自适应不同屏幕尺寸
- 保持良好的用户体验

### 性能优化

- 减少不必要的DOM操作
- 优化事件监听器
- 提升页面响应速度

## 注意事项

1. **浏览器兼容性**: 建议使用现代浏览器以获得最佳体验
2. **本地存储**: 配置信息存储在浏览器本地，清除浏览器数据会丢失设置
3. **网络连接**: AI分析功能需要稳定的网络连接
4. **API限制**: 请确保API密钥有效且有足够的调用额度

## 更新日志

### v2.0.0 (最新)

- ✅ 新增10个豆包模型
- ✅ 移除包含"thinking"的模型
- ✅ 实现左上角模型信息显示
- ✅ 添加自动保存机制
- ✅ 移除冗余界面元素
- ✅ 修复重复模型问题
- ✅ 优化模型信息卡片样式
- ✅ 调整突现词分析显示数量（10个）
- ✅ 调整关键词分析显示数量（20个）
- ✅ 优化排名样式设计
- ✅ 修复提示图标重复问题

### v1.0.0

- 初始版本发布
- 基础CiteSpace数据采集功能
- 支持多种AI模型
- 基础用户界面
