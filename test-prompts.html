<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompts模块测试</title>
</head>
<body>
    <h1>CiteSpace Prompts模块测试</h1>
    <div id="test-results"></div>

    <!-- 引入所有prompts文件 -->
    <script src="prompts/data-retrieval-prompts.js"></script>
    <script src="prompts/publication-trend-prompts.js"></script>
    <script src="prompts/country-distribution-prompts.js"></script>
    <script src="prompts/journal-distribution-prompts.js"></script>
    <script src="prompts/institution-distribution-prompts.js"></script>
    <script src="prompts/author-analysis-prompts.js"></script>
    <script src="prompts/burst-analysis-prompts.js"></script>
    <script src="prompts/cluster-analysis-prompts.js"></script>
    <script src="prompts/keyword-analysis-prompts.js"></script>
    <script src="prompts/temporal-evolution-prompts.js"></script>
    <script src="prompts/core-citations-prompts.js"></script>
    <script src="prompts/network-topology-prompts.js"></script>
    <script src="prompts/citation-pattern-prompts.js"></script>
    <script src="prompts/data-quality-prompts.js"></script>
    <script src="prompts/index.js"></script>

    <script>
        // 测试函数
        function testPrompts() {
            const results = document.getElementById('test-results');
            let html = '<h2>测试结果：</h2>';
            
            try {
                // 测试1: 检查CITESPACE_ANALYSIS_PROMPT是否存在
                if (typeof CITESPACE_ANALYSIS_PROMPT !== 'undefined') {
                    html += '<p style="color: green;">✅ CITESPACE_ANALYSIS_PROMPT 已定义</p>';
                } else {
                    html += '<p style="color: red;">❌ CITESPACE_ANALYSIS_PROMPT 未定义</p>';
                }
                
                // 测试2: 检查getModulePrompt函数是否存在
                if (typeof getModulePrompt === 'function') {
                    html += '<p style="color: green;">✅ getModulePrompt 函数已定义</p>';
                } else {
                    html += '<p style="color: red;">❌ getModulePrompt 函数未定义</p>';
                }
                
                // 测试3: 检查getAvailableModules函数是否存在
                if (typeof getAvailableModules === 'function') {
                    html += '<p style="color: green;">✅ getAvailableModules 函数已定义</p>';
                } else {
                    html += '<p style="color: red;">❌ getAvailableModules 函数未定义</p>';
                }
                
                // 测试4: 获取所有可用模块
                if (typeof getAvailableModules === 'function') {
                    const modules = getAvailableModules();
                    html += `<p style="color: green;">✅ 可用模块数量: ${modules.length}</p>`;
                    html += '<ul>';
                    modules.forEach(module => {
                        html += `<li>${module}</li>`;
                    });
                    html += '</ul>';
                }
                
                // 测试5: 测试获取特定模块的prompt
                if (typeof getModulePrompt === 'function') {
                    const dataRetrievalPrompt = getModulePrompt('data-retrieval');
                    if (dataRetrievalPrompt) {
                        html += '<p style="color: green;">✅ 成功获取 data-retrieval 模块的prompt</p>';
                    } else {
                        html += '<p style="color: red;">❌ 无法获取 data-retrieval 模块的prompt</p>';
                    }
                    
                    const publicationTrendPrompt = getModulePrompt('publication-trend');
                    if (publicationTrendPrompt) {
                        html += '<p style="color: green;">✅ 成功获取 publication-trend 模块的prompt</p>';
                    } else {
                        html += '<p style="color: red;">❌ 无法获取 publication-trend 模块的prompt</p>';
                    }
                }
                
                // 测试6: 检查MODULE_INFO是否存在
                if (typeof MODULE_INFO !== 'undefined') {
                    html += '<p style="color: green;">✅ MODULE_INFO 已定义</p>';
                    html += `<p>模块信息数量: ${Object.keys(MODULE_INFO).length}</p>`;
                } else {
                    html += '<p style="color: red;">❌ MODULE_INFO 未定义</p>';
                }
                
            } catch (error) {
                html += `<p style="color: red;">❌ 测试过程中发生错误: ${error.message}</p>`;
            }
            
            results.innerHTML = html;
        }
        
        // 页面加载完成后运行测试
        window.addEventListener('load', testPrompts);
    </script>
</body>
</html>
